@model OnlineCourse.Common.UserLogin

@{
    Layout = null;

    var homeInfor = (Model.Dao.HomeInfor)ViewBag.HomeInfor;

    Dictionary<string, string> listResultExamOfUser = ViewBag.ListResultExam;

    List<OnlineCourse.Models.ProductModel> cartProducts = (List<OnlineCourse.Models.ProductModel>)ViewBag.CartProducts;

    List<OnlineCourse.Models.ProductModel> ListOwnProducts = (List<OnlineCourse.Models.ProductModel>)ViewBag.ListOwnProducts;
}



<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="wUserIDth=device-wUserIDth" />
    <title>Thông tin cá nhân</title>
    <link href="~/Content/ProfileUser.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- App favicon -->
    <link rel="shortcut icon" href="/assets/admin/images/logo.png">
    <!-- Plugins css-->
    <link href="/assets/admin/libs/sweetalert2/sweetalert2.min.css" rel="stylesheet" type="text/css" />
    <!-- App css -->
    <link href="/assets/admin/css/bootstrap.min.css" rel="stylesheet" type="text/css" id="bootstrap-stylesheet" />
    <link href="/assets/admin/css/icons.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/admin/css/app.min.css" rel="stylesheet" type="text/css" id="app-stylesheet" />
</head>
<body>
    <nav class="navbar navbar-inverse fixed-top bg-primary">
        <div class="container-fluid">
            <div class="navbar-header">
                <a href="\Home" >
                    <span class="align-middle"><img src="~/assets/client/images/logo.png" class="rounded float-left" alt="..." style="max-width:30%;max-height:30%"></span>
                </a>
                
                <a href="\Home" class="logo text-center logo-light navbar-brand">
                    <span style="color:white;vertical-align:middle;font-size:x-large;">
                        <span class="text-primary" style="vertical-align:middle;font-size:x-large;">...</span>
                        Thắng Vinh Online Learning
                    </span>
                </a>
            </div>
        </div>
    </nav>

    <section class="bg-light container">
        <div class="container">

            <div class="row">
                <div class="col-lg-12 mb-4 mb-sm-5">
                    <div class="card card-style1 border-0">
                        <div class="card-body p-1-9 p-sm-2-3 p-md-6 p-lg-7">
                            <div class="row align-users-center">
                                <div class="col-lg-6 mb-4 mb-lg-0">
                                    <img src="@Model.Image" alt="..." style="max-width: 70%">
                                </div>
                                <div class="col-lg-6 px-xl-10">
                                    <div class="bg-primary d-lg-inline-block py-1-9 px-1-9 px-sm-6 mb-1-9 rounded">
                                        <h3 class="h2 text-white mb-0">@Model.FullName</h3>
                                        <span class="text-warning">@Model.Role</span>
                                    </div>
                                    <ul class="list-unstyled mb-1-9">
                                        <li class="mb-2 mb-xl-3 display-28"><span class="display-26 text-secondary me-2 font-weight-600">Tài khoản:</span> @Model.UserName</li>
                                        <li class="mb-2 mb-xl-3 display-28"><span class="display-26 text-secondary me-2 font-weight-600">Vai trò:</span> @Model.Role</li>
                                        <li class="mb-2 mb-xl-3 display-28"><span class="display-26 text-secondary me-2 font-weight-600">Ngày tham gia:</span> @Model.CreateDate</li>
                                        <li class="mb-2 mb-xl-3 display-28"><span class="display-26 text-secondary me-2 font-weight-600">Email:</span> @Model.Email</li>
                                        <li class="mb-2 mb-xl-3 display-28"><span class="display-26 text-secondary me-2 font-weight-600">Địa chỉ:</span> @Model.Address</li>
                                        <li class="display-28"><span class="display-26 text-secondary me-2 font-weight-600">Di động:</span> @Model.Phone</li>
                                    </ul>
                                    <ul class="social-icon-style1 list-unstyled mb-0 ps-0">
                                        <li><a href="#!"><i class="ti-twitter-alt"> @Model.FullName</i></a></li>
                                        <li><a href="#!"><i class="ti-facebook"> @Model.FullName</i></a></li>
                                        <li><a href="#!"><i class="ti-pinterest"> @Model.FullName</i></a></li>
                                        <li><a href="#!"><i class="ti-instagram"> @Model.FullName</i></a></li>

                                        <li style="text-align:right;">
                                            <button id="openModel" type="button" class="btn btn-success" data-toggle="modal" data-target="#exampleModal">
                                                Cập nhật thông tin
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12 mb-4 mb-sm-5">
                    <div>
                        <span class="section-title text-primary mb-3 mb-sm-4">Thông tin về tôi</span>
                        <p>Edith is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>
                        <p class="mb-0">It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed.</p>
                    </div>
                </div>
                <hr />
                <div class="col-lg-12">
                    <div class="row">
                        <div class="col-lg-12 mb-4 mb-sm-5">
                            <div class="mb-4 mb-sm-5">
                                <span class="section-title text-primary mb-3 mb-sm-4">Kết quả học tập gần đây</span>
                                @if (listResultExamOfUser.Count != 0)
                                {
                                    foreach (var item in listResultExamOfUser.ToList())
                                    {
                                        <div class="progress-text">
                                            <div class="row">
                                                <div class="col-6">@item.Key</div>
                                                <div class="col-6 text-end">@item.Value%</div>
                                            </div>
                                        </div>
                                        <div class="custom-progress progress progress-medium mb-3" style="height: 4px;">
                                            <div class="animated custom-bar progress-bar slUserIDeInLeft bg-success" style="width: @(item.Value + "%")" aria-valuemax="100" aria-valuemin="0" aria-valuenow="10" role="progressbar"></div>
                                        </div>
                                    }
                                }
                                else
                                {
                                    <div class="row" style="text-align:center;">
                                        <span>Không có dữ liệu</span>
                                    </div>
                                }
                            </div>
                            <hr />
                            <div>
                                <span class="section-title text-primary mb-3 mb-sm-4">Các khóa học đã mua</span>
                                @{
                                    if(ListOwnProducts.Count != 0)
                                    {
                                        Html.RenderPartial("~/Views/PartialView/_BoughtProductCard.cshtml");
                                    }
                                    else
                                    {
                                        <div class="row" style="text-align:center;">
                                            <span>Không có dữ liệu</span>
                                        </div>
                                    }
                                }
                            </div>
                            <hr />
                            <div>
                                <span class="section-title text-primary mb-3 mb-sm-4">Các khóa học đã trong giỏ hàng</span>
                                @{
                                    if (cartProducts.Count != 0)
                                    {
                                        Html.RenderPartial("~/Views/PartialView/_CartProductCard.cshtml");
                                    }
                                    else
                                    {
                                        <div class="row" style="text-align:center;">
                                            <span>Không có dữ liệu</span>
                                        </div>
                                    }
                                }
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div id="profileModel" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hUserIDden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Cập nhật thông tin</h5>

                </div>
                <div class="modal-body">
                    @using (Html.BeginForm("UpdateProfile", "User", FormMethod.Post, new { enctype = "multipart/form-data" }))
                    {
                        @Html.AntiForgeryToken()
                        <div class="form-horizontal">
                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                            <div class="form-group">
                                <div class="col-md-10">
                                    @Html.TextBoxFor(model => model.UserID, new { @class = "form-control", type = "text", style = "display:none" })
                                    @Html.ValidationMessageFor(model => model.UserID, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-md-2">Tài khoản</label>
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.UserName, new { htmlAttributes = new { @class = "form-control", type = "text" }, @disabled = "disabled" })
                                    @Html.ValidationMessageFor(model => model.UserName, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-md-2">Họ tên</label>
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.FullName, new { htmlAttributes = new { @class = "form-control", type = "text" } })
                                    @Html.ValidationMessageFor(model => model.FullName, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-md-2">Điện thoại</label>
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.Phone, new { htmlAttributes = new { @class = "form-control", type = "text" } })
                                    @Html.ValidationMessageFor(model => model.Phone, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-md-2">Email</label>
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.Email, new { htmlAttributes = new { @class = "form-control", type = "text" } })
                                    @Html.ValidationMessageFor(model => model.Email, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-md-2">Địa chỉ</label>
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.Address, new { htmlAttributes = new { @class = "form-control", type = "text" } })
                                    @Html.ValidationMessageFor(model => model.Address, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-md-2">Ảnh</label>
                                <div class="col-md-10">
                                    @*@Html.EditorFor(model => model.Image, new { htmlAttributes = new { @class = "form-control", type = "text" } })*@

                                    <input type="file" id="imageFile" name="imageFile" class="btn btn-info" />

                                    @Html.ValidationMessageFor(model => model.Image, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <hr />

                            <div class="form-group " style="text-align:right;">
                                <a id="save" class="abclaice ">
                                    <input type="submit" class="btn btn-info waves-effect waves-light" value="Cập nhật" />
                                </a>
                                <button id="closeModel" type="button" class="btn btn-secondary" data-dismiss="modal">Hủy</button>
                            </div>

                        </div>

                    }
                </div>
            </div>
        </div>

    </div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript"></script>

    <script src="/assets/admin/libs/bootstrap/js/bootbox.min.js"></script>

    <script src="~/Scripts/site.js"></script>

    <script>

        $('#openModel').click(function () {
            $('#profileModel').modal('show');
        })

        $('#closeModel').click(function () {
            $('#profileModel').modal('hide');
        })

    </script>

</body>
</html>

